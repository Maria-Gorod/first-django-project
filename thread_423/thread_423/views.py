from django.http import HttpResponse
from django.shortcuts import render

MENU = {"Главная": "/", "О Блоге": "/about", "Отзывы" : "/reviews"}

POSTS = [
    {
        "id": 1,
        "title": "Как выбрать дизайн для машинной вышивки",
        "preview": "Правильный выбор дизайна — основа качественной машинной вышивки на одежде.",
        "image": "imgs/post1_img.jpg",
        "content": """
        Машинная вышивка начинается с дизайна.
        От того, насколько грамотно он подобран, зависит внешний вид изделия и качество результата.

        При выборе дизайна важно учитывать:
        • тип ткани (хлопок, трикотаж, деним, футер)  
        • плотность и количество стежков  
        • размер дизайна относительно изделия  
        • направление и последовательность стежков  

        Для тонких тканей подойдут лёгкие и не перегруженные дизайны,
        а для плотной одежды можно использовать более насыщенную вышивку.

        Не забывайте о стабилизаторах — они помогают сохранить форму дизайна
        и избежать деформации ткани во время вышивки.

        Грамотно подобранный дизайн делает машинную вышивку аккуратной,
        долговечной и профессиональной.
        """
    },
    {
        "id": 2,
        "title": "Основные ошибки новичков в машинной вышивке",
        "preview": "Разбираем частые проблемы, с которыми сталкиваются начинающие мастера машинной вышивки.",
        "image": "imgs/post2_img.jpg",
        "content": """
        Начало работы с машинной вышивкой часто сопровождается ошибками.
        Это нормальный этап обучения, но многие проблемы можно избежать заранее.

        Самые распространённые ошибки:
        • неправильное натяжение верхней и нижней нити  
        • неподходящая игла для выбранной ткани  
        • отсутствие или неправильный выбор стабилизатора  
        • слабая фиксация ткани в пяльцах  

        Также новички часто игнорируют тестовые вышивки,
        что приводит к браку на готовом изделии.

        Перед вышивкой на одежде рекомендуется
        всегда проверять дизайн на образце ткани.

        Практика, внимательность и постепенное усложнение задач
        помогут добиться стабильного и качественного результата.
        """
    }
]

def mainPage(request):
    data = {"menu": MENU, "title": "Главная", "posts": POSTS}

    return render(request, "./index.html", data)


def aboutPage(request):
    data = {"menu": MENU, "title": "О блоге"}

    return render(request, "./about.html", data)


def postDefault(request):
    return postPage(request)


def postPage(request, post_id=1):
    post = next((p for p in POSTS if p["id"] == post_id), None)

    data = {
        "menu": MENU,
        "title": post["title"],
        "post": post
    }

    return render(request, "post.html", data)